FROM python:3.13.0b3-slim 

RUN apt-get update && apt-get install -y curl apt-transport-https gnupg2

RUN curl -LO "https://dl.k8s.io/release/v1.23.0/bin/linux/amd64/kubectl" \
    && install -o root -g root -m 0755 kubectl /usr/local/bin/kubectl

RUN pip install Flask

#RUN mkdir -p /app

WORKDIR /app

COPY run.py .

ENV APP_DIRS="/Ruuter /Resql /DataMapper /Liquibase /OpenSearch /bot"
RUN mkdir -p $APP_DIRS

COPY Ruuter/private/v2/backoffice /Ruuter/private/backoffice
COPY Ruuter/public/v2/backoffice /Ruuter/public/backoffice
COPY Resql/backoffice /Resql/backoffice
COPY DataMapper/v1/hbs/backoffice/hbs /DataMapper/backoffice
COPY Liquibase/backoffice /Liquibase/backoffice

LABEL org.opencontainers.image.description Docker PRE-ALPHA image for Buerokratt-DSL

CMD ["python", "run.py"]
